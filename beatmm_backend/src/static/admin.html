<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeatMM Pro - è¶…çº§ç®¡ç†å‘˜æ§åˆ¶å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* éšè—å…¥å£æç¤º */
        .hidden-access-hint {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 12px;
            opacity: 0.3;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }

        .hidden-access-hint:hover {
            opacity: 1;
        }

        /* è¶…çº§ç®¡ç†å‘˜ç™»å½•ç•Œé¢ */
        .super-admin-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .super-admin-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 2px solid;
            border-image: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57) 1;
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: glow 3s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from {
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 107, 107, 0.3);
            }
            to {
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 30px rgba(78, 205, 196, 0.4);
            }
        }

        .super-admin-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .super-admin-title {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .super-admin-subtitle {
            color: #a0a0a0;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #e0e0e0;
        }

        .form-input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 12px;
            color: #ffffff;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .form-input:focus {
            outline: none;
            border-color: #4ecdc4;
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.3);
        }

        .form-input::placeholder {
            color: #a0a0a0;
        }

        .super-admin-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            border-radius: 12px;
            color: #ffffff;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .super-admin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.3);
        }

        .super-admin-btn:active {
            transform: translateY(0);
        }

        /* ç®¡ç†å‘˜æ§åˆ¶å°ç•Œé¢ */
        .admin-console {
            display: none;
            min-height: 100vh;
        }

        .admin-header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-logo {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .admin-user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .admin-content {
            display: flex;
            min-height: calc(100vh - 80px);
        }

        .admin-sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
        }

        .admin-nav {
            list-style: none;
        }

        .admin-nav-item {
            margin-bottom: 10px;
        }

        .admin-nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: #e0e0e0;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .admin-nav-link:hover,
        .admin-nav-link.active {
            background: rgba(78, 205, 196, 0.2);
            color: #4ecdc4;
        }

        .admin-main {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
        }

        .section-title {
            font-size: 28px;
            margin-bottom: 20px;
            color: #ffffff;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #4ecdc4;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #a0a0a0;
            font-size: 14px;
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .action-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
        }

        .action-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffffff;
        }

        .action-description {
            color: #a0a0a0;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .action-btn {
            padding: 10px 20px;
            background: linear-gradient(45deg, #45b7d1, #96ceb4);
            border: none;
            border-radius: 8px;
            color: #ffffff;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(69, 183, 209, 0.3);
        }

        .danger-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
        }

        .danger-btn:hover {
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .admin-content {
                flex-direction: column;
            }

            .admin-sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .stats-grid,
            .action-grid {
                grid-template-columns: 1fr;
            }
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #4ecdc4;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* é€šçŸ¥æ ·å¼ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(78, 205, 196, 0.9);
            color: #ffffff;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: rgba(255, 107, 107, 0.9);
        }
    </style>
</head>
<body>
    <!-- éšè—å…¥å£æç¤º -->
    <div class="hidden-access-hint">
        æŒ‰ Ctrl+Shift+A è¿›å…¥è¶…çº§ç®¡ç†å‘˜æ¨¡å¼
    </div>

    <!-- è¶…çº§ç®¡ç†å‘˜ç™»å½•ç•Œé¢ -->
    <div id="superAdminLogin" class="super-admin-container">
        <div class="super-admin-card">
            <div class="super-admin-header">
                <h1 class="super-admin-title">ğŸ” è¶…çº§ç®¡ç†å‘˜</h1>
                <p class="super-admin-subtitle">BeatMM Pro ç³»ç»Ÿæ§åˆ¶å°</p>
            </div>

            <form id="superAdminForm">
                <div class="form-group">
                    <label class="form-label">ğŸ”‘ å¯†é’¥éªŒè¯</label>
                    <input type="password" id="secretKey" class="form-input" placeholder="è¾“å…¥è¶…çº§ç®¡ç†å‘˜å¯†é’¥" required>
                </div>

                <div class="form-group">
                    <label class="form-label">ğŸ“± æ‰‹æœºå·ç </label>
                    <input type="tel" id="adminPhone" class="form-input" placeholder="è¾“å…¥ç®¡ç†å‘˜æ‰‹æœºå·ç " required>
                </div>

                <div class="form-group">
                    <label class="form-label">ğŸ”’ å¯†ç </label>
                    <input type="password" id="adminPassword" class="form-input" placeholder="è¾“å…¥ç®¡ç†å‘˜å¯†ç " required>
                </div>

                <button type="submit" class="super-admin-btn">
                    <span id="loginBtnText">è¿›å…¥æ§åˆ¶å°</span>
                    <span id="loginLoading" class="loading" style="display: none;"></span>
                </button>
            </form>
        </div>
    </div>

    <!-- ç®¡ç†å‘˜æ§åˆ¶å°ç•Œé¢ -->
    <div id="adminConsole" class="admin-console">
        <!-- é¡¶éƒ¨å¯¼èˆª -->
        <header class="admin-header">
            <div class="admin-logo">ğŸµ BeatMM Pro è¶…çº§æ§åˆ¶å°</div>
            <div class="admin-user-info">
                <div class="admin-avatar" id="adminAvatar">S</div>
                <span id="adminName">è¶…çº§ç®¡ç†å‘˜</span>
                <button onclick="logout()" style="background: #ff6b6b; border: none; color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer;">é€€å‡º</button>
            </div>
        </header>

        <!-- ä¸»è¦å†…å®¹ -->
        <div class="admin-content">
            <!-- ä¾§è¾¹æ  -->
            <nav class="admin-sidebar">
                <ul class="admin-nav">
                    <li class="admin-nav-item">
                        <a href="#" class="admin-nav-link active" onclick="showSection('dashboard')">
                            ğŸ“Š ä»ªè¡¨ç›˜
                        </a>
                    </li>
                    <li class="admin-nav-item">
                        <a href="#" class="admin-nav-link" onclick="showSection('users')">
                            ğŸ‘¥ ç”¨æˆ·ç®¡ç†
                        </a>
                    </li>
                    <li class="admin-nav-item">
                        <a href="#" class="admin-nav-link" onclick="showSection('notifications')">
                            ğŸ“¢ é€šçŸ¥ç®¡ç†
                        </a>
                    </li>
                    <li class="admin-nav-item">
                        <a href="#" class="admin-nav-link" onclick="showSection('accounting')">
                            ğŸ’° ç®—è´¦æœºå™¨äºº
                        </a>
                    </li>
                    <li class="admin-nav-item">
                        <a href="#" class="admin-nav-link" onclick="showSection('maintenance')">
                            ğŸ”§ ç»´æŠ¤æœºå™¨äºº
                        </a>
                    </li>
                    <li class="admin-nav-item">
                        <a href="#" class="admin-nav-link" onclick="showSection('system')">
                            âš™ï¸ ç³»ç»Ÿè®¾ç½®
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- ä¸»è¦åŒºåŸŸ -->
            <main class="admin-main">
                <!-- ä»ªè¡¨ç›˜ -->
                <section id="dashboard" class="admin-section active">
                    <h2 class="section-title">ğŸ“Š ç³»ç»Ÿä»ªè¡¨ç›˜</h2>
                    
                    <div class="stats-grid" id="statsGrid">
                        <!-- ç»Ÿè®¡å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </div>

                    <div class="action-grid">
                        <div class="action-card">
                            <h3 class="action-title">ğŸš€ å¿«é€Ÿæ“ä½œ</h3>
                            <p class="action-description">æ‰§è¡Œå¸¸ç”¨çš„ç®¡ç†æ“ä½œ</p>
                            <button class="action-btn" onclick="refreshStats()">åˆ·æ–°ç»Ÿè®¡</button>
                        </div>

                        <div class="action-card">
                            <h3 class="action-title">ğŸ” ç³»ç»Ÿæ£€æŸ¥</h3>
                            <p class="action-description">æ£€æŸ¥ç³»ç»Ÿå¥åº·çŠ¶æ€</p>
                            <button class="action-btn" onclick="systemHealthCheck()">å¥åº·æ£€æŸ¥</button>
                        </div>

                        <div class="action-card">
                            <h3 class="action-title">ğŸ§¹ ç³»ç»Ÿæ¸…ç†</h3>
                            <p class="action-description">æ¸…ç†è¿‡æœŸæ•°æ®å’Œç¼“å­˜</p>
                            <button class="action-btn" onclick="systemCleanup()">æ‰§è¡Œæ¸…ç†</button>
                        </div>

                        <div class="action-card">
                            <h3 class="action-title">âš¡ ç³»ç»Ÿä¼˜åŒ–</h3>
                            <p class="action-description">ä¼˜åŒ–æ•°æ®åº“å’Œæ€§èƒ½</p>
                            <button class="action-btn" onclick="systemOptimize()">æ‰§è¡Œä¼˜åŒ–</button>
                        </div>
                    </div>
                </section>

                <!-- ç”¨æˆ·ç®¡ç† -->
                <section id="users" class="admin-section">
                    <h2 class="section-title">ğŸ‘¥ ç”¨æˆ·ç®¡ç†</h2>
                    <div id="usersContent">
                        <!-- ç”¨æˆ·ç®¡ç†å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </div>
                </section>

                <!-- é€šçŸ¥ç®¡ç† -->
                <section id="notifications" class="admin-section">
                    <h2 class="section-title">ğŸ“¢ é€šçŸ¥ç®¡ç†</h2>
                    <div id="notificationsContent">
                        <!-- é€šçŸ¥ç®¡ç†å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </div>
                </section>

                <!-- ç®—è´¦æœºå™¨äºº -->
                <section id="accounting" class="admin-section">
                    <h2 class="section-title">ğŸ’° ç®—è´¦æœºå™¨äºº</h2>
                    <div id="accountingContent">
                        <!-- ç®—è´¦æœºå™¨äººå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </div>
                </section>

                <!-- ç»´æŠ¤æœºå™¨äºº -->
                <section id="maintenance" class="admin-section">
                    <h2 class="section-title">ğŸ”§ ç»´æŠ¤æœºå™¨äºº</h2>
                    <div id="maintenanceContent">
                        <!-- ç»´æŠ¤æœºå™¨äººå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </div>
                </section>

                <!-- ç³»ç»Ÿè®¾ç½® -->
                <section id="system" class="admin-section">
                    <h2 class="section-title">âš™ï¸ ç³»ç»Ÿè®¾ç½®</h2>
                    <div id="systemContent">
                        <!-- ç³»ç»Ÿè®¾ç½®å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let adminToken = null;
        let currentUser = null;
        const API_BASE = 'http://localhost:5001/api';

        // éšè—å…¥å£æ£€æµ‹
        let keySequence = [];
        document.addEventListener('keydown', function(e) {
            keySequence.push(e.key);
            if (keySequence.length > 10) {
                keySequence.shift();
            }

            // æ£€æµ‹ Ctrl+Shift+A ç»„åˆé”®
            if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                e.preventDefault();
                showSuperAdminLogin();
            }
        });

        // æ˜¾ç¤ºè¶…çº§ç®¡ç†å‘˜ç™»å½•ç•Œé¢
        function showSuperAdminLogin() {
            document.getElementById('superAdminLogin').style.display = 'flex';
            document.getElementById('adminConsole').style.display = 'none';
        }

        // è¶…çº§ç®¡ç†å‘˜ç™»å½•
        document.getElementById('superAdminForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const secretKey = document.getElementById('secretKey').value;
            const phone = document.getElementById('adminPhone').value;
            const password = document.getElementById('adminPassword').value;

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            document.getElementById('loginBtnText').style.display = 'none';
            document.getElementById('loginLoading').style.display = 'inline-block';

            try {
                // é¦–å…ˆéªŒè¯å¯†é’¥å¹¶æ³¨å†Œè¶…çº§ç®¡ç†å‘˜ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
                let response = await fetch(`${API_BASE}/auth/super-admin-register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        secret_key: secretKey,
                        phone: phone,
                        password: password,
                        email: 'admin@beatmm.pro',
                        first_name: 'Super',
                        last_name: 'Admin'
                    })
                });

                if (!response.ok) {
                    // å¦‚æœæ³¨å†Œå¤±è´¥ï¼Œå°è¯•ç™»å½•
                    response = await fetch(`${API_BASE}/auth/login`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            phone: phone,
                            password: password
                        })
                    });
                }

                const data = await response.json();

                if (response.ok && data.user && data.user.role === 'super_admin') {
                    adminToken = data.access_token;
                    currentUser = data.user;
                    
                    // è¿›å…¥ç®¡ç†æ§åˆ¶å°
                    document.getElementById('superAdminLogin').style.display = 'none';
                    document.getElementById('adminConsole').style.display = 'block';
                    
                    // æ›´æ–°ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º
                    document.getElementById('adminName').textContent = `${currentUser.first_name} ${currentUser.last_name}`;
                    document.getElementById('adminAvatar').textContent = currentUser.first_name.charAt(0);
                    
                    // åŠ è½½ä»ªè¡¨ç›˜æ•°æ®
                    loadDashboard();
                    
                    showNotification('ç™»å½•æˆåŠŸï¼æ¬¢è¿ä½¿ç”¨è¶…çº§ç®¡ç†å‘˜æ§åˆ¶å°', 'success');
                } else {
                    throw new Error(data.error || 'ç™»å½•å¤±è´¥');
                }
            } catch (error) {
                showNotification(error.message, 'error');
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                document.getElementById('loginBtnText').style.display = 'inline';
                document.getElementById('loginLoading').style.display = 'none';
            }
        });

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // åˆ‡æ¢ç®¡ç†ç•Œé¢éƒ¨åˆ†
        function showSection(sectionId) {
            // éšè—æ‰€æœ‰éƒ¨åˆ†
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });

            // ç§»é™¤æ‰€æœ‰å¯¼èˆªé“¾æ¥çš„æ´»åŠ¨çŠ¶æ€
            document.querySelectorAll('.admin-nav-link').forEach(link => {
                link.classList.remove('active');
            });

            // æ˜¾ç¤ºé€‰ä¸­çš„éƒ¨åˆ†
            document.getElementById(sectionId).classList.add('active');

            // æ¿€æ´»å¯¹åº”çš„å¯¼èˆªé“¾æ¥
            event.target.classList.add('active');

            // æ ¹æ®éƒ¨åˆ†åŠ è½½ç›¸åº”å†…å®¹
            switch(sectionId) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'users':
                    loadUsers();
                    break;
                case 'notifications':
                    loadNotifications();
                    break;
                case 'accounting':
                    loadAccounting();
                    break;
                case 'maintenance':
                    loadMaintenance();
                    break;
                case 'system':
                    loadSystem();
                    break;
            }
        }

        // åŠ è½½ä»ªè¡¨ç›˜
        async function loadDashboard() {
            try {
                const response = await fetch(`${API_BASE}/admin/statistics`, {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const stats = await response.json();
                    displayStats(stats);
                }
            } catch (error) {
                console.error('åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥:', error);
            }
        }

        // æ˜¾ç¤ºç»Ÿè®¡æ•°æ®
        function displayStats(stats) {
            const statsGrid = document.getElementById('statsGrid');
            statsGrid.innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${stats.users?.total || 0}</div>
                    <div class="stat-label">æ€»ç”¨æˆ·æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${stats.users?.active || 0}</div>
                    <div class="stat-label">æ´»è·ƒç”¨æˆ·</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${stats.music?.total_songs || 0}</div>
                    <div class="stat-label">éŸ³ä¹æ€»æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${stats.wallet?.total_balance?.toFixed(0) || 0} MMK</div>
                    <div class="stat-label">æ€»é’±åŒ…ä½™é¢</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${stats.music?.total_plays || 0}</div>
                    <div class="stat-label">æ€»æ’­æ”¾æ¬¡æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${stats.notifications?.active || 0}</div>
                    <div class="stat-label">æ´»è·ƒé€šçŸ¥</div>
                </div>
            `;
        }

        // åˆ·æ–°ç»Ÿè®¡æ•°æ®
        function refreshStats() {
            loadDashboard();
            showNotification('ç»Ÿè®¡æ•°æ®å·²åˆ·æ–°');
        }

        // ç³»ç»Ÿå¥åº·æ£€æŸ¥
        async function systemHealthCheck() {
            try {
                const response = await fetch(`${API_BASE}/bot/maintenance/health-check`, {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const result = await response.json();
                    showNotification(`ç³»ç»Ÿå¥åº·æ£€æŸ¥å®Œæˆ - çŠ¶æ€: ${result.overall_status}`);
                } else {
                    throw new Error('å¥åº·æ£€æŸ¥å¤±è´¥');
                }
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // ç³»ç»Ÿæ¸…ç†
        async function systemCleanup() {
            try {
                const response = await fetch(`${API_BASE}/bot/maintenance/cleanup`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const result = await response.json();
                    showNotification('ç³»ç»Ÿæ¸…ç†å®Œæˆ');
                } else {
                    throw new Error('ç³»ç»Ÿæ¸…ç†å¤±è´¥');
                }
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // ç³»ç»Ÿä¼˜åŒ–
        async function systemOptimize() {
            try {
                const response = await fetch(`${API_BASE}/bot/maintenance/optimize`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });

                if (response.ok) {
                    const result = await response.json();
                    showNotification('ç³»ç»Ÿä¼˜åŒ–å®Œæˆ');
                } else {
                    throw new Error('ç³»ç»Ÿä¼˜åŒ–å¤±è´¥');
                }
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // åŠ è½½ç”¨æˆ·ç®¡ç†
        function loadUsers() {
            document.getElementById('usersContent').innerHTML = `
                <div class="action-grid">
                    <div class="action-card">
                        <h3 class="action-title">ğŸ‘¥ ç”¨æˆ·åˆ—è¡¨</h3>
                        <p class="action-description">æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰ç”¨æˆ·</p>
                        <button class="action-btn" onclick="viewAllUsers()">æŸ¥çœ‹ç”¨æˆ·</button>
                    </div>
                    <div class="action-card">
                        <h3 class="action-title">â¬†ï¸ ç”¨æˆ·å‡çº§</h3>
                        <p class="action-description">å°†æ™®é€šç”¨æˆ·å‡çº§ä¸ºç®¡ç†å‘˜</p>
                        <button class="action-btn" onclick="upgradeUser()">å‡çº§ç”¨æˆ·</button>
                    </div>
                </div>
            `;
        }

        // åŠ è½½é€šçŸ¥ç®¡ç†
        function loadNotifications() {
            document.getElementById('notificationsContent').innerHTML = `
                <div class="action-grid">
                    <div class="action-card">
                        <h3 class="action-title">ğŸ“¢ å‘å¸ƒé€šçŸ¥</h3>
                        <p class="action-description">å‘ç”¨æˆ·å‘å¸ƒç³»ç»Ÿé€šçŸ¥</p>
                        <button class="action-btn" onclick="createNotification()">å‘å¸ƒé€šçŸ¥</button>
                    </div>
                    <div class="action-card">
                        <h3 class="action-title">ğŸ“‹ é€šçŸ¥åˆ—è¡¨</h3>
                        <p class="action-description">æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰é€šçŸ¥</p>
                        <button class="action-btn" onclick="viewNotifications()">æŸ¥çœ‹é€šçŸ¥</button>
                    </div>
                </div>
            `;
        }

        // åŠ è½½ç®—è´¦æœºå™¨äºº
        function loadAccounting() {
            document.getElementById('accountingContent').innerHTML = `
                <div class="action-grid">
                    <div class="action-card">
                        <h3 class="action-title">ğŸ’° è´¢åŠ¡æŠ¥å‘Š</h3>
                        <p class="action-description">ç”Ÿæˆè¯¦ç»†çš„è´¢åŠ¡åˆ†ææŠ¥å‘Š</p>
                        <button class="action-btn" onclick="generateFinancialReport()">ç”ŸæˆæŠ¥å‘Š</button>
                    </div>
                    <div class="action-card">
                        <h3 class="action-title">ğŸ“Š ç”¨æˆ·ç»Ÿè®¡</h3>
                        <p class="action-description">åˆ†æç”¨æˆ·æ¶ˆè´¹å’Œæ´»è·ƒåº¦</p>
                        <button class="action-btn" onclick="getUserStatistics()">ç”¨æˆ·ç»Ÿè®¡</button>
                    </div>
                    <div class="action-card">
                        <h3 class="action-title">ğŸ” è‡ªåŠ¨å¯¹è´¦</h3>
                        <p class="action-description">æ£€æŸ¥è´¦æˆ·ä½™é¢ä¸€è‡´æ€§</p>
                        <button class="action-btn" onclick="reconcileAccounts()">æ‰§è¡Œå¯¹è´¦</button>
                    </div>
                </div>
            `;
        }

        // åŠ è½½ç»´æŠ¤æœºå™¨äºº
        function loadMaintenance() {
            document.getElementById('maintenanceContent').innerHTML = `
                <div class="action-grid">
                    <div class="action-card">
                        <h3 class="action-title">ğŸ” å¥åº·æ£€æŸ¥</h3>
                        <p class="action-description">å…¨é¢æ£€æŸ¥ç³»ç»Ÿå¥åº·çŠ¶æ€</p>
                        <button class="action-btn" onclick="systemHealthCheck()">å¥åº·æ£€æŸ¥</button>
                    </div>
                    <div class="action-card">
                        <h3 class="action-title">ğŸ§¹ æ•°æ®æ¸…ç†</h3>
                        <p class="action-description">æ¸…ç†è¿‡æœŸå’Œæ— ç”¨æ•°æ®</p>
                        <button class="action-btn" onclick="systemCleanup()">æ‰§è¡Œæ¸…ç†</button>
                    </div>
                    <div class="action-card">
                        <h3 class="action-title">âš¡ æ€§èƒ½ä¼˜åŒ–</h3>
                        <p class="action-description">ä¼˜åŒ–æ•°æ®åº“å’Œç³»ç»Ÿæ€§èƒ½</p>
                        <button class="action-btn" onclick="systemOptimize()">æ‰§è¡Œä¼˜åŒ–</button>
                    </div>
                    <div class="action-card">
                        <h3 class="action-title">ğŸ“ˆ æ€§èƒ½æŠ¥å‘Š</h3>
                        <p class="action-description">ç”Ÿæˆç³»ç»Ÿæ€§èƒ½åˆ†ææŠ¥å‘Š</p>
                        <button class="action-btn" onclick="getPerformanceReport()">æ€§èƒ½æŠ¥å‘Š</button>
                    </div>
                </div>
            `;
        }

        // åŠ è½½ç³»ç»Ÿè®¾ç½®
        function loadSystem() {
            document.getElementById('systemContent').innerHTML = `
                <div class="action-grid">
                    <div class="action-card">
                        <h3 class="action-title">ğŸ¤– æœºå™¨äººçŠ¶æ€</h3>
                        <p class="action-description">æŸ¥çœ‹ç®—è´¦å’Œç»´æŠ¤æœºå™¨äººçŠ¶æ€</p>
                        <button class="action-btn" onclick="getBotStatus()">æœºå™¨äººçŠ¶æ€</button>
                    </div>
                    <div class="action-card">
                        <h3 class="action-title">ğŸ“‹ ç³»ç»Ÿæ—¥å¿—</h3>
                        <p class="action-description">æŸ¥çœ‹ç³»ç»Ÿæ“ä½œæ—¥å¿—</p>
                        <button class="action-btn" onclick="viewSystemLogs()">æŸ¥çœ‹æ—¥å¿—</button>
                    </div>
                </div>
            `;
        }

        // é€€å‡ºç™»å½•
        function logout() {
            adminToken = null;
            currentUser = null;
            document.getElementById('superAdminLogin').style.display = 'flex';
            document.getElementById('adminConsole').style.display = 'none';
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('superAdminForm').reset();
            
            showNotification('å·²å®‰å…¨é€€å‡º');
        }

        // å ä½å‡½æ•° - å®é™…é¡¹ç›®ä¸­éœ€è¦å®ç°
        function viewAllUsers() { showNotification('ç”¨æˆ·åˆ—è¡¨åŠŸèƒ½å¼€å‘ä¸­...'); }
        function upgradeUser() { showNotification('ç”¨æˆ·å‡çº§åŠŸèƒ½å¼€å‘ä¸­...'); }
        function createNotification() { showNotification('å‘å¸ƒé€šçŸ¥åŠŸèƒ½å¼€å‘ä¸­...'); }
        function viewNotifications() { showNotification('é€šçŸ¥åˆ—è¡¨åŠŸèƒ½å¼€å‘ä¸­...'); }
        function generateFinancialReport() { showNotification('è´¢åŠ¡æŠ¥å‘ŠåŠŸèƒ½å¼€å‘ä¸­...'); }
        function getUserStatistics() { showNotification('ç”¨æˆ·ç»Ÿè®¡åŠŸèƒ½å¼€å‘ä¸­...'); }
        function reconcileAccounts() { showNotification('è‡ªåŠ¨å¯¹è´¦åŠŸèƒ½å¼€å‘ä¸­...'); }
        function getPerformanceReport() { showNotification('æ€§èƒ½æŠ¥å‘ŠåŠŸèƒ½å¼€å‘ä¸­...'); }
        function getBotStatus() { showNotification('æœºå™¨äººçŠ¶æ€åŠŸèƒ½å¼€å‘ä¸­...'); }
        function viewSystemLogs() { showNotification('ç³»ç»Ÿæ—¥å¿—åŠŸèƒ½å¼€å‘ä¸­...'); }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥æ˜¯å¦æœ‰ä¿å­˜çš„ç™»å½•çŠ¶æ€
            const savedToken = localStorage.getItem('adminToken');
            if (savedToken) {
                adminToken = savedToken;
                // å¯ä»¥åœ¨è¿™é‡ŒéªŒè¯tokenæ˜¯å¦ä»ç„¶æœ‰æ•ˆ
            }
        });
    </script>
</body>
</html>

